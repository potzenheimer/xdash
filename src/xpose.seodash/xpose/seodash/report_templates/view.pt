<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="xpose.seodash">
<body>

<metal:main fill-slot="main">
  <metal:content-core define-macro="main">

    <div class="app-page-header datapanel"
        tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime">
        <div class="row datapanel-row">
            <div class="col-md-9 col-sm-9 datapanel-item datapanel-item-title">
                <h1 tal:content="context/Title">Meine Berichte</h1>
            </div>
            <div class="col-md-3 col-sm-3 datapanel-item">
                <div class="item-data">
                    <span class="numberic">xpose414.de</span>
                    Projekt
                </div>
                <span class="item-date"
                    tal:define="timestamp python:context.modified().ISO()">
                    letztes Update:
                    <span tal:attributes="data-livestamp timestamp"
                        tal:content="python:toLocalizedTime(timestamp, long_format=True)" />
                </span>
            </div>
        </div>
    </div>


    <div class="container app-page-content" id="content-core">
        <div class="page-header">
            <a class="btn btn-danger pull-right"
                tal:attributes="href string:${context/absolute_url}/@@build-report">
                Build new report (credits required)
            </a>
            <h2>Report Data</h2>
        </div>

      <div class="report" tal:define="report view/report;
                                      items python:report['items']">
        <div class="report-metric" tal:repeat="item items">
          <div class="report-metric-header">
            <h2 class="report-metric-title">
              <span tal:replace="item/title" />
              <small tal:content="item/uid" />
            </h2>
            <p class="report-metric-lead"
              tal:content="item/description" />
          </div>
          <div class="report-metric-content"
            tal:define="metric item/dataTable;
                        rows metric/rows;
                        row_content python:len(rows)">
            <table class="table table-bordered metric-table"
              tal:condition="row_content">
              <thead class="metric-table-head" tal:define="cols metric/cols">
                <tr class="metric-table-row metric-table-row-primary">
                  <tal:block tal:repeat="col cols">
                    <th tal:attributes="class string:metric-table-cell-head metric-table-cell-head-primary;
                                        id string:table-cell-${col/id}"
                      tal:content="col/label"
                      i18n:translate="" />
                  </tal:block>
                </tr>
              </thead>
              <tbody class="metric-table-body"
                tal:define="cols metric/cols;
                            rows metric/rows">
                  <tr tal:repeat="row rows">
                    <tal:items tal:repeat="col cols">
                      <td tal:define="col_id col/id">
                        <!--<span tal:replace="python:row[col_id]" /> -->
                        <span tal:content="row" />
                      </td>
                    </tal:items>
                  </tr>
              </tbody>
            </table>
            <div class="app-callout app-callout-warning" tal:condition="not:row_content">
              <h4>Bericht nicht verfügbar</h4>
              <p>Dieser Bericht ist im Augenblick nicht verfügbar. Dies könnte bedeuten, dass
                der Bericht noch nicht generiert wurde, oder keine aktuellen Daten vorliegen.
            </div>
          </div>
        </div>
      </div>

        <pre tal:content="context/report" />

        <h3>GA dynamic query</h3>
        <pre tal:content="view/print_report" />


        <h3>activeCollab</h3>
        <!--<div tal:replace="structure view/tracking_report" />-->
        <h3>Xovi</h3>
        <!--<pre tal:condition="context/report_xovi"
            tal:content="context/report_xovi" />-->

    </div>

  </metal:content-core>
</metal:main>

</body>
</html>

